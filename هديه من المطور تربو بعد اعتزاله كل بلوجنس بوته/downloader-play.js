import yts from 'yt-search';

let handler = async (m, { conn, command, args, text, usedPrefix }) => {
    // ุงูุชุญูู ุฅุฐุง ูู ูุชู ุฅุฏุฎุงู ูุต ุงูุจุญุซ
    if (!text) {
        return conn.reply(m.chat, '- *๐ฑ ุงูุชุจ ุงุณู ุงูููุฏูู ุงู ุงูุงุบููุฉ ุงูุฐู ุชุฑูุฏ ุงูุจุญุซ ุนููุง ูู ููุชููุจ ูุชุดุบูููุง*', m);
    }

    await m.react('๐ง');  // ุฅุถุงูุฉ ุชูุงุนู ุนูุฏ ุจุฏุก ุงูุจุญุซ
    let res = await yts(text);  // ุงูุจุญุซ ุจุงุณุชุฎุฏุงู yt-search
    let play = res.videos[0];  // ุฃุฎุฐ ุฃูู ูุชูุฌุฉ ุจุญุซ

    // ุงูุชุญูู ูู ูุฌูุฏ ูุชูุฌุฉ
    if (!play) {
        throw `- *๐ฑ ุญููุฏุซ ุฎููุทููุฃ*`;  // ุฑุณุงูุฉ ุฎุทุฃ ูู ุญุงู ุนุฏู ุงูุนุซูุฑ ุนูู ููุฏูู
    }

    // ุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช ุงููุทููุจุฉ ูู ูุชูุฌุฉ ุงูุจุญุซ
    let { title, thumbnail, ago, timestamp, views, videoId, url } = play;

    // ุจูุงุก ุงููุต ุงูุฐู ุณูุชู ุฅุฑุณุงูู
    let txt = '*โงโโโโโโฐ๐ถโฑโโโโโโง*\n';
    txt += `*โโคถ ุงูุนููุงู โ* _${title}_\n\n`;
    txt += `*โโคถ ุฑุงุจุท ุงูููุทุน โ* _https://www.youtube.com/watch?v=${videoId}_\n`;
    txt += '*โ โโ โท โ โน๐ท๏ธโบ โ โท โโ โ*\n\n';
    txt += `*โโคถ ุชู ุงููุดุฑ ููุฐ โ* _${ago}_\n`;
    txt += `*โโคถ ูุฏุฉ ุงูููุฏูู โ* _${timestamp}_\n`;
    txt += `*โโคถ ุนุฏุฏ ุงููุดุงูุฏุงุช โ* _${views.toLocaleString()}_\n`;
    txt += `*โ โโ โท โ โน๐ท๏ธโบ โ โท โโ โ*`;

    // ุฅุฑุณุงู ุงูุฑุณุงูุฉ ูุน ุงูุฃุฒุฑุงุฑ
    await conn.sendButton(m.chat, txt, 'สy:แดแดษดแดษชสแด๐ฃฌสแดแด', thumbnail, [
        ['ใ๐งโุงุฑุณููุงู โ  ููุตููุชใ', `${usedPrefix}ุงุบููุฉ ${url}`],
        ['ใ๐โุงุฑุณููุงู โ ููููููู ุตููุชูใ', `${usedPrefix}ุดุบู_ูุตูุช ${text}`],
        ['ใ๐ฌโุงุฑุณููุงู โ  ููููููุฏูููใ', `${usedPrefix}ุดุบู_ูููุฏูู ${url}`]
    ], m);

    // ุฅุถุงูุฉ ุชูุงุนู ุจุนุฏ ุฅุชูุงู ุงูุนูููุฉ ุจูุฌุงุญ
    await m.react('โ');
};

// ูุนูููุงุช ุญูู ุงูุฃูุงูุฑ
handler.help = ['play', 'play2', 'ytmp3'];
handler.tags = ['dl'];
handler.command = ['ุดุบู'];  // ุงูุฃูุงูุฑ ุงููููู ุงุณุชุฎุฏุงููุง

export default handler;